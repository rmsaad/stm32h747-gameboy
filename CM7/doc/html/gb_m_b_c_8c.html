<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>stm32h747-gameboy: Core/Src/gbMBC.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">stm32h747-gameboy
   </div>
   <div id="projectbrief">Gameboy Emulator for STM32H747-DISCO</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('gb_m_b_c_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">gbMBC.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>: Gameboy MBC Functionality This file emulates all functionality of the Gameboy Memory Bank Controller embedded into each game cartridge.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &quot;<a class="el" href="gbmemory_8h_source.html">gbmemory.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a27afee853f0b4a522be68b48b81fbf5f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gb_m_b_c_8c.html#a27afee853f0b4a522be68b48b81fbf5f">vGBMBCsetControllerType</a> (uint8_t code)</td></tr>
<tr class="memdesc:a27afee853f0b4a522be68b48b81fbf5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">sets the cartridge type for use in this file corresponding to data stored at the memory location 0x147  <a href="gb_m_b_c_8c.html#a27afee853f0b4a522be68b48b81fbf5f">More...</a><br /></td></tr>
<tr class="separator:a27afee853f0b4a522be68b48b81fbf5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad49b9a9255e105b0fc77087a1e21dd25"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gb_m_b_c_8c.html#ad49b9a9255e105b0fc77087a1e21dd25">ucGBMBCreadBankX</a> (uint16_t address)</td></tr>
<tr class="memdesc:ad49b9a9255e105b0fc77087a1e21dd25"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function will return data from a ROM location in the memory map depending on the MBC type.  <a href="gb_m_b_c_8c.html#ad49b9a9255e105b0fc77087a1e21dd25">More...</a><br /></td></tr>
<tr class="separator:ad49b9a9255e105b0fc77087a1e21dd25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5c356822fc92d633ba8f9df5c3990a1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gb_m_b_c_8c.html#ab5c356822fc92d633ba8f9df5c3990a1">vGBMBCwrite</a> (uint16_t address, uint8_t data)</td></tr>
<tr class="memdesc:ab5c356822fc92d633ba8f9df5c3990a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Data is written to MBC register when the address falls in range 0x0000 to 0x7FFF.  <a href="gb_m_b_c_8c.html#ab5c356822fc92d633ba8f9df5c3990a1">More...</a><br /></td></tr>
<tr class="separator:ab5c356822fc92d633ba8f9df5c3990a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a2d30477fe6f8988bb8620674213dc7f7"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gb_m_b_c_8c.html#a2d30477fe6f8988bb8620674213dc7f7">ucgbMBCcontrollerCode</a> = 0</td></tr>
<tr class="separator:a2d30477fe6f8988bb8620674213dc7f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c6f559af3a75ed23d4250564ea86931"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gb_m_b_c_8c.html#a7c6f559af3a75ed23d4250564ea86931">ucgbMBCramEN</a> = 0</td></tr>
<tr class="separator:a7c6f559af3a75ed23d4250564ea86931"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30aa330e1378c55c1285c78de7bb31b1"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gb_m_b_c_8c.html#a30aa330e1378c55c1285c78de7bb31b1">ucgbMBCoffsetLow</a> = 0x01</td></tr>
<tr class="separator:a30aa330e1378c55c1285c78de7bb31b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66d04d4affcf5c2067c893d647189eff"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gb_m_b_c_8c.html#a66d04d4affcf5c2067c893d647189eff">ucgbMBCoffsetHigh</a> = 0x0</td></tr>
<tr class="separator:a66d04d4affcf5c2067c893d647189eff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac372e65bba3763e3d95fa5eb335d1d00"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gb_m_b_c_8c.html#ac372e65bba3763e3d95fa5eb335d1d00">ucgbMBCbankMode</a> = 0x0</td></tr>
<tr class="separator:ac372e65bba3763e3d95fa5eb335d1d00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1a74952e70d4f6f1290efd9ca571e20"><td class="memItemLeft" align="right" valign="top">const unsigned char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gb_m_b_c_8c.html#af1a74952e70d4f6f1290efd9ca571e20">rom</a></td></tr>
<tr class="separator:af1a74952e70d4f6f1290efd9ca571e20"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>: Gameboy MBC Functionality This file emulates all functionality of the Gameboy Memory Bank Controller embedded into each game cartridge. </p>
<dl class="section author"><dt>Author</dt><dd>: Rami </dd></dl>
<dl class="section date"><dt>Date</dt><dd>: Jun 11, 2021 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ad49b9a9255e105b0fc77087a1e21dd25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad49b9a9255e105b0fc77087a1e21dd25">&#9670;&nbsp;</a></span>ucGBMBCreadBankX()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ucGBMBCreadBankX </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>address</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function will return data from a ROM location in the memory map depending on the MBC type. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>memory map address </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>data stored at specified ROM address </dd></dl>

</div>
</div>
<a id="a27afee853f0b4a522be68b48b81fbf5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27afee853f0b4a522be68b48b81fbf5f">&#9670;&nbsp;</a></span>vGBMBCsetControllerType()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vGBMBCsetControllerType </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>code</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>sets the cartridge type for use in this file corresponding to data stored at the memory location 0x147 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">code</td><td>data stored at memory location 0x147 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

</div>
</div>
<a id="ab5c356822fc92d633ba8f9df5c3990a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5c356822fc92d633ba8f9df5c3990a1">&#9670;&nbsp;</a></span>vGBMBCwrite()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vGBMBCwrite </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Data is written to MBC register when the address falls in range 0x0000 to 0x7FFF. </p>
<p>When the range 0x0000 - 0x1FFF is written to with value 0x0A, the Gameboy external RAM is enabled. Any other value written to this range will result in the external RAM being disabled. When the range 0x2000 - 0x3FFF is written to, the lower 5 bits correspond to the switch-able ROM bank that read operation are to be read from. When the range 0x4000 - 0x5FFF is written to, depending on the mode it will either specify the top 2 bits of the ROM bank to be read from or it specify the current RAM bank. When the range falls between 0x6000 - 0x7FFF if the value 0 is written then ROM mode is selected and if the value 1 is written then RAM mode is selected. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>memory map address </td></tr>
    <tr><td class="paramname">data</td><td>byte to be written to MBC register </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="af1a74952e70d4f6f1290efd9ca571e20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1a74952e70d4f6f1290efd9ca571e20">&#9670;&nbsp;</a></span>rom</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned char* rom</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ac372e65bba3763e3d95fa5eb335d1d00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac372e65bba3763e3d95fa5eb335d1d00">&#9670;&nbsp;</a></span>ucgbMBCbankMode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ucgbMBCbankMode = 0x0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2d30477fe6f8988bb8620674213dc7f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d30477fe6f8988bb8620674213dc7f7">&#9670;&nbsp;</a></span>ucgbMBCcontrollerCode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ucgbMBCcontrollerCode = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a66d04d4affcf5c2067c893d647189eff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66d04d4affcf5c2067c893d647189eff">&#9670;&nbsp;</a></span>ucgbMBCoffsetHigh</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ucgbMBCoffsetHigh = 0x0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a30aa330e1378c55c1285c78de7bb31b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30aa330e1378c55c1285c78de7bb31b1">&#9670;&nbsp;</a></span>ucgbMBCoffsetLow</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ucgbMBCoffsetLow = 0x01</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a7c6f559af3a75ed23d4250564ea86931"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c6f559af3a75ed23d4250564ea86931">&#9670;&nbsp;</a></span>ucgbMBCramEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ucgbMBCramEN = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_c6310732a22f63c0c2fc5595561e68f1.html">Core</a></li><li class="navelem"><a class="el" href="dir_b596f468b52957496e4f78b80e029268.html">Src</a></li><li class="navelem"><a class="el" href="gb_m_b_c_8c.html">gbMBC.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
