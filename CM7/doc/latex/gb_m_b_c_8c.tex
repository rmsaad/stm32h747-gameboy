\hypertarget{gb_m_b_c_8c}{}\doxysection{Core/\+Src/gb\+MBC.c File Reference}
\label{gb_m_b_c_8c}\index{Core/Src/gbMBC.c@{Core/Src/gbMBC.c}}


\+: Gameboy MBC Functionality This file emulates all functionality of the Gameboy Memory Bank Controller embedded into each game cartridge.  


{\ttfamily \#include $<$stdint.\+h$>$}\newline
{\ttfamily \#include \char`\"{}gbmemory.\+h\char`\"{}}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{gb_m_b_c_8c_a27afee853f0b4a522be68b48b81fbf5f}{v\+GBMBCset\+Controller\+Type}} (uint8\+\_\+t code)
\begin{DoxyCompactList}\small\item\em sets the cartridge type for use in this file corresponding to data stored at the memory location 0x147 \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{gb_m_b_c_8c_ad49b9a9255e105b0fc77087a1e21dd25}{uc\+GBMBCread\+BankX}} (uint16\+\_\+t address)
\begin{DoxyCompactList}\small\item\em This function will return data from a ROM location in the memory map depending on the MBC type. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{gb_m_b_c_8c_ab5c356822fc92d633ba8f9df5c3990a1}{v\+GBMBCwrite}} (uint16\+\_\+t address, uint8\+\_\+t data)
\begin{DoxyCompactList}\small\item\em Data is written to MBC register when the address falls in range 0x0000 to 0x7\+FFF. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
uint8\+\_\+t \mbox{\hyperlink{gb_m_b_c_8c_a2d30477fe6f8988bb8620674213dc7f7}{ucgb\+MBCcontroller\+Code}} = 0
\item 
uint8\+\_\+t \mbox{\hyperlink{gb_m_b_c_8c_a7c6f559af3a75ed23d4250564ea86931}{ucgb\+MBCram\+EN}} = 0
\item 
uint8\+\_\+t \mbox{\hyperlink{gb_m_b_c_8c_a30aa330e1378c55c1285c78de7bb31b1}{ucgb\+MBCoffset\+Low}} = 0x01
\item 
uint8\+\_\+t \mbox{\hyperlink{gb_m_b_c_8c_a66d04d4affcf5c2067c893d647189eff}{ucgb\+MBCoffset\+High}} = 0x0
\item 
uint8\+\_\+t \mbox{\hyperlink{gb_m_b_c_8c_ac372e65bba3763e3d95fa5eb335d1d00}{ucgb\+MBCbank\+Mode}} = 0x0
\item 
const unsigned char $\ast$ \mbox{\hyperlink{gb_m_b_c_8c_af1a74952e70d4f6f1290efd9ca571e20}{rom}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\+: Gameboy MBC Functionality This file emulates all functionality of the Gameboy Memory Bank Controller embedded into each game cartridge. 

\begin{DoxyAuthor}{Author}
\+: Rami 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
\+: Jun 11, 2021 
\end{DoxyDate}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{gb_m_b_c_8c_ad49b9a9255e105b0fc77087a1e21dd25}\label{gb_m_b_c_8c_ad49b9a9255e105b0fc77087a1e21dd25}} 
\index{gbMBC.c@{gbMBC.c}!ucGBMBCreadBankX@{ucGBMBCreadBankX}}
\index{ucGBMBCreadBankX@{ucGBMBCreadBankX}!gbMBC.c@{gbMBC.c}}
\doxysubsubsection{\texorpdfstring{ucGBMBCreadBankX()}{ucGBMBCreadBankX()}}
{\footnotesize\ttfamily uint8\+\_\+t uc\+GBMBCread\+BankX (\begin{DoxyParamCaption}\item[{uint16\+\_\+t}]{address }\end{DoxyParamCaption})}



This function will return data from a ROM location in the memory map depending on the MBC type. 


\begin{DoxyParams}{Parameters}
{\em address} & memory map address \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
data stored at specified ROM address 
\end{DoxyReturn}
\mbox{\Hypertarget{gb_m_b_c_8c_a27afee853f0b4a522be68b48b81fbf5f}\label{gb_m_b_c_8c_a27afee853f0b4a522be68b48b81fbf5f}} 
\index{gbMBC.c@{gbMBC.c}!vGBMBCsetControllerType@{vGBMBCsetControllerType}}
\index{vGBMBCsetControllerType@{vGBMBCsetControllerType}!gbMBC.c@{gbMBC.c}}
\doxysubsubsection{\texorpdfstring{vGBMBCsetControllerType()}{vGBMBCsetControllerType()}}
{\footnotesize\ttfamily void v\+GBMBCset\+Controller\+Type (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{code }\end{DoxyParamCaption})}



sets the cartridge type for use in this file corresponding to data stored at the memory location 0x147 


\begin{DoxyParams}{Parameters}
{\em code} & data stored at memory location 0x147 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Nothing 
\end{DoxyReturn}
\mbox{\Hypertarget{gb_m_b_c_8c_ab5c356822fc92d633ba8f9df5c3990a1}\label{gb_m_b_c_8c_ab5c356822fc92d633ba8f9df5c3990a1}} 
\index{gbMBC.c@{gbMBC.c}!vGBMBCwrite@{vGBMBCwrite}}
\index{vGBMBCwrite@{vGBMBCwrite}!gbMBC.c@{gbMBC.c}}
\doxysubsubsection{\texorpdfstring{vGBMBCwrite()}{vGBMBCwrite()}}
{\footnotesize\ttfamily void v\+GBMBCwrite (\begin{DoxyParamCaption}\item[{uint16\+\_\+t}]{address,  }\item[{uint8\+\_\+t}]{data }\end{DoxyParamCaption})}



Data is written to MBC register when the address falls in range 0x0000 to 0x7\+FFF. 

When the range 0x0000 -\/ 0x1\+FFF is written to with value 0x0A, the Gameboy external RAM is enabled. Any other value written to this range will result in the external RAM being disabled. When the range 0x2000 -\/ 0x3\+FFF is written to, the lower 5 bits correspond to the switch-\/able ROM bank that read operation are to be read from. When the range 0x4000 -\/ 0x5\+FFF is written to, depending on the mode it will either specify the top 2 bits of the ROM bank to be read from or it specify the current RAM bank. When the range falls between 0x6000 -\/ 0x7\+FFF if the value 0 is written then ROM mode is selected and if the value 1 is written then RAM mode is selected. 
\begin{DoxyParams}{Parameters}
{\em address} & memory map address \\
\hline
{\em data} & byte to be written to MBC register \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Nothing 
\end{DoxyReturn}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{gb_m_b_c_8c_af1a74952e70d4f6f1290efd9ca571e20}\label{gb_m_b_c_8c_af1a74952e70d4f6f1290efd9ca571e20}} 
\index{gbMBC.c@{gbMBC.c}!rom@{rom}}
\index{rom@{rom}!gbMBC.c@{gbMBC.c}}
\doxysubsubsection{\texorpdfstring{rom}{rom}}
{\footnotesize\ttfamily const unsigned char$\ast$ rom\hspace{0.3cm}{\ttfamily [extern]}}

\mbox{\Hypertarget{gb_m_b_c_8c_ac372e65bba3763e3d95fa5eb335d1d00}\label{gb_m_b_c_8c_ac372e65bba3763e3d95fa5eb335d1d00}} 
\index{gbMBC.c@{gbMBC.c}!ucgbMBCbankMode@{ucgbMBCbankMode}}
\index{ucgbMBCbankMode@{ucgbMBCbankMode}!gbMBC.c@{gbMBC.c}}
\doxysubsubsection{\texorpdfstring{ucgbMBCbankMode}{ucgbMBCbankMode}}
{\footnotesize\ttfamily uint8\+\_\+t ucgb\+MBCbank\+Mode = 0x0}

\mbox{\Hypertarget{gb_m_b_c_8c_a2d30477fe6f8988bb8620674213dc7f7}\label{gb_m_b_c_8c_a2d30477fe6f8988bb8620674213dc7f7}} 
\index{gbMBC.c@{gbMBC.c}!ucgbMBCcontrollerCode@{ucgbMBCcontrollerCode}}
\index{ucgbMBCcontrollerCode@{ucgbMBCcontrollerCode}!gbMBC.c@{gbMBC.c}}
\doxysubsubsection{\texorpdfstring{ucgbMBCcontrollerCode}{ucgbMBCcontrollerCode}}
{\footnotesize\ttfamily uint8\+\_\+t ucgb\+MBCcontroller\+Code = 0}

\mbox{\Hypertarget{gb_m_b_c_8c_a66d04d4affcf5c2067c893d647189eff}\label{gb_m_b_c_8c_a66d04d4affcf5c2067c893d647189eff}} 
\index{gbMBC.c@{gbMBC.c}!ucgbMBCoffsetHigh@{ucgbMBCoffsetHigh}}
\index{ucgbMBCoffsetHigh@{ucgbMBCoffsetHigh}!gbMBC.c@{gbMBC.c}}
\doxysubsubsection{\texorpdfstring{ucgbMBCoffsetHigh}{ucgbMBCoffsetHigh}}
{\footnotesize\ttfamily uint8\+\_\+t ucgb\+MBCoffset\+High = 0x0}

\mbox{\Hypertarget{gb_m_b_c_8c_a30aa330e1378c55c1285c78de7bb31b1}\label{gb_m_b_c_8c_a30aa330e1378c55c1285c78de7bb31b1}} 
\index{gbMBC.c@{gbMBC.c}!ucgbMBCoffsetLow@{ucgbMBCoffsetLow}}
\index{ucgbMBCoffsetLow@{ucgbMBCoffsetLow}!gbMBC.c@{gbMBC.c}}
\doxysubsubsection{\texorpdfstring{ucgbMBCoffsetLow}{ucgbMBCoffsetLow}}
{\footnotesize\ttfamily uint8\+\_\+t ucgb\+MBCoffset\+Low = 0x01}

\mbox{\Hypertarget{gb_m_b_c_8c_a7c6f559af3a75ed23d4250564ea86931}\label{gb_m_b_c_8c_a7c6f559af3a75ed23d4250564ea86931}} 
\index{gbMBC.c@{gbMBC.c}!ucgbMBCramEN@{ucgbMBCramEN}}
\index{ucgbMBCramEN@{ucgbMBCramEN}!gbMBC.c@{gbMBC.c}}
\doxysubsubsection{\texorpdfstring{ucgbMBCramEN}{ucgbMBCramEN}}
{\footnotesize\ttfamily uint8\+\_\+t ucgb\+MBCram\+EN = 0}

