\hypertarget{gbppu_8c}{}\doxysection{Core/\+Src/gbppu.c File Reference}
\label{gbppu_8c}\index{Core/Src/gbppu.c@{Core/Src/gbppu.c}}


\+: Gameboy PPU Functionality This file emulates all functionality of the Gameboy Pixel/\+Picture Processing Unit (PPU).  


{\ttfamily \#include \char`\"{}main.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}gbfunctions.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}gbcpu.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}gbmemory.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}string.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}stm32h7\+\_\+display.\+h\char`\"{}}\newline
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{gbppu_8c_a7be588c83ce41143d6df9542c5c4a9c2}{SDRAM1}}~0x\+D1000000\+UL
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{gbppu_8c_ac0ea182ee405627457dc7fba48120e34}{prv\+Check\+BGP}} ()
\begin{DoxyCompactList}\small\item\em Background and window color to palette conversion. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{gbppu_8c_ab73b8cd93989c2272c12fdf5d9f458a3}{prv\+Check\+OBP0}} ()
\begin{DoxyCompactList}\small\item\em OBP0 register color to palette conversion. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{gbppu_8c_a1432a3e2020cb8fbd5d421d6929a57f4}{prv\+Check\+OBP1}} ()
\begin{DoxyCompactList}\small\item\em OBP1 register color to palette conversion. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{gbppu_8c_a5b404d5d82422f8042bfd6540ad381ec}{prv\+Check\+LYC}} (uint8\+\_\+t ly)
\begin{DoxyCompactList}\small\item\em Compares LY Register to LYC. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{gbppu_8c_ac2086e2d9ea420499b54833b1726a681}{prv\+Set\+Mode}} (uint8\+\_\+t mode)
\begin{DoxyCompactList}\small\item\em Sets the mode of the STAT Register. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{gbppu_8c_a945ea162b77db42c939d42c2a97aa6b6}{prv\+Update\+Buffer}} (uint8\+\_\+t data, int pixel\+Pos)
\begin{DoxyCompactList}\small\item\em Updates the line buffer with pixel information for 1 specified pixel. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{gbppu_8c_aeeeb1b7836652ece5d6f29c3c219081e}{prv\+GBPPUDraw\+Line\+Background}} (uint8\+\_\+t ly, uint8\+\_\+t SCX, uint8\+\_\+t SCY, uint16\+\_\+t Tile\+Data\+Addr, uint16\+\_\+t Display\+Addr)
\begin{DoxyCompactList}\small\item\em Update line buffer with background information. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{gbppu_8c_a4c8a469ac0b13d39ce543d9b96121107}{prv\+GBPPUDraw\+Line\+Window}} (uint8\+\_\+t ly, uint8\+\_\+t WX, uint8\+\_\+t WY, uint16\+\_\+t Tile\+Data\+Addr, uint16\+\_\+t Display\+Addr)
\begin{DoxyCompactList}\small\item\em Update line buffer with window information. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{gbppu_8c_a45c1df62b10bd52b1243c6d837294ef9}{prv\+GBPPUDraw\+Line\+Objects}} (uint8\+\_\+t ly)
\begin{DoxyCompactList}\small\item\em Update line buffer with object information. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{gbppu_8c_a432ec91bc2248c882f63368d80540076}{prv\+GBPPUDraw\+Line}} (uint8\+\_\+t ly, uint8\+\_\+t SCX, uint8\+\_\+t SCY)
\begin{DoxyCompactList}\small\item\em Update data in the line buffer for 1 line of the Gameboy. \end{DoxyCompactList}\item 
uint16\+\_\+t \mbox{\hyperlink{gbppu_8c_a4d71f50a18b8187e042f6a0309444279}{prv\+Get\+Back\+Win\+Tile\+Data\+Sel}} ()
\begin{DoxyCompactList}\small\item\em Read LCDC Register to find appropriate Background \& Tile Data Address. \end{DoxyCompactList}\item 
uint16\+\_\+t \mbox{\hyperlink{gbppu_8c_a833e1bbd97a1d31f085e17cc6168f72e}{prv\+Get\+Back\+Tile\+Display\+Sel}} ()
\begin{DoxyCompactList}\small\item\em Read LCDC Register to find appropriate Background Tile Display Select Address. \end{DoxyCompactList}\item 
uint16\+\_\+t \mbox{\hyperlink{gbppu_8c_a0dc987e3a4895a95823988f9c0f6cf1f}{prv\+Get\+Win\+Tile\+Display\+Sel}} ()
\begin{DoxyCompactList}\small\item\em Read LCDC Register to find appropriate Window Tile Display Select Address. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{gbppu_8c_a24dba8d7b4ecd97d4dc8cc7b14ff0031}{v\+Set\+Line\+Buffer}} ()
\begin{DoxyCompactList}\small\item\em Zeros All Memory in the Line Buffer. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{gbppu_8c_af55e16b0234ec9b9a7f6703f53fa18b7}{v\+GBPPUStep}} ()
\begin{DoxyCompactList}\small\item\em Steps the PPU by t\+States. \end{DoxyCompactList}\item 
uint16\+\_\+t \mbox{\hyperlink{gbppu_8c_a9b29df5e22493dc42927f15a2858730b}{get\+Tile\+Line\+Data}} (uint16\+\_\+t tile\+\_\+offset, uint8\+\_\+t line\+\_\+offset, uint16\+\_\+t Tile\+Data\+Addr, uint16\+\_\+t Display\+Addr)
\begin{DoxyCompactList}\small\item\em Finds specific line data of a tile using the tile\+\_\+offset and line\+\_\+offset. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
uint8\+\_\+t \mbox{\hyperlink{gbppu_8c_ae1deb0fdbd829f97dc542cf5cc07cf86}{uc\+LY}} = 0
\item 
uint8\+\_\+t \mbox{\hyperlink{gbppu_8c_a016ccd2d7b6615abe4967f9a27060746}{uc\+Mode}}
\item 
uint32\+\_\+t \mbox{\hyperlink{gbppu_8c_a1937f8f3d3d58a98306b4e7491aaebcc}{ult\+States\+Total}}
\item 
uint8\+\_\+t \mbox{\hyperlink{gbppu_8c_a485638b8ee0120e72662b05977915ca3}{uc\+BGPColor\+To\+Palette}} \mbox{[}4\mbox{]}
\item 
uint8\+\_\+t \mbox{\hyperlink{gbppu_8c_a9be772970ed9fbe14e0218fd424b6596}{uc\+OBP0\+Color\+To\+Palette}} \mbox{[}4\mbox{]}
\item 
uint8\+\_\+t \mbox{\hyperlink{gbppu_8c_ae10b4a8ffd018a241f9ec6ce9f1f690d}{uc\+OBP1\+Color\+To\+Palette}} \mbox{[}4\mbox{]}
\item 
uint8\+\_\+t $\ast$ \mbox{\hyperlink{gbppu_8c_accbb06b6c811df643b6d56dcd52e99f5}{uc\+GBLine}} = (uint8\+\_\+t$\ast$)\mbox{\hyperlink{gbppu_8c_a7be588c83ce41143d6df9542c5c4a9c2}{SDRAM1}}
\item 
uint8\+\_\+t \mbox{\hyperlink{gbppu_8c_ac9de52373fb1ba5b7529ba0d15ebc8b8}{uc\+BGWINline}} \mbox{[}160\mbox{]}
\item 
uint8\+\_\+t \mbox{\hyperlink{gbppu_8c_ab2318977e8442dfe26bc0a0b41c1f165}{ul\+Scale\+Amount}} = 3
\item 
uint32\+\_\+t \mbox{\hyperlink{gbppu_8c_ab196f3e59335a72ee34e8481033baf15}{ul\+Cur\+Line}}
\item 
uint32\+\_\+t \mbox{\hyperlink{gbppu_8c_af58b00da0c806a9f69bda59355d02e29}{ul\+Line\+Add}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\+: Gameboy PPU Functionality This file emulates all functionality of the Gameboy Pixel/\+Picture Processing Unit (PPU). 

This includes drawing the Background, Window, and Object Layers to the frame buffer to be displayed 60 times a second. \begin{DoxyAuthor}{Author}
\+: Rami 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
\+: Jun 11, 2021 
\end{DoxyDate}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{gbppu_8c_a7be588c83ce41143d6df9542c5c4a9c2}\label{gbppu_8c_a7be588c83ce41143d6df9542c5c4a9c2}} 
\index{gbppu.c@{gbppu.c}!SDRAM1@{SDRAM1}}
\index{SDRAM1@{SDRAM1}!gbppu.c@{gbppu.c}}
\doxysubsubsection{\texorpdfstring{SDRAM1}{SDRAM1}}
{\footnotesize\ttfamily \#define SDRAM1~0x\+D1000000\+UL}



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{gbppu_8c_a9b29df5e22493dc42927f15a2858730b}\label{gbppu_8c_a9b29df5e22493dc42927f15a2858730b}} 
\index{gbppu.c@{gbppu.c}!getTileLineData@{getTileLineData}}
\index{getTileLineData@{getTileLineData}!gbppu.c@{gbppu.c}}
\doxysubsubsection{\texorpdfstring{getTileLineData()}{getTileLineData()}}
{\footnotesize\ttfamily uint16\+\_\+t get\+Tile\+Line\+Data (\begin{DoxyParamCaption}\item[{uint16\+\_\+t}]{tile\+\_\+offset,  }\item[{uint8\+\_\+t}]{line\+\_\+offset,  }\item[{uint16\+\_\+t}]{Tile\+Data\+Addr,  }\item[{uint16\+\_\+t}]{Display\+Addr }\end{DoxyParamCaption})}



Finds specific line data of a tile using the tile\+\_\+offset and line\+\_\+offset. 

Called by \mbox{\hyperlink{gbppu_8c_a432ec91bc2248c882f63368d80540076}{prv\+GBPPUDraw\+Line()}} and returns color information of a specific tile in the Gameboy\textquotesingle{}s VRAM located by using the tile\+\_\+offset and line\+\_\+offset parameters. 
\begin{DoxyParams}{Parameters}
{\em tile\+\_\+offset} & gives the address offset in the tile map in Gameboy\textquotesingle{}s VRAM \\
\hline
{\em line\+\_\+offset} & gives the line offset in the tile \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
uint16\+\_\+t data containing the color information of each pixel of a particular line belonging to a tile in the Gameboy\textquotesingle{}s VRAM 
\end{DoxyReturn}
\mbox{\Hypertarget{gbppu_8c_ac0ea182ee405627457dc7fba48120e34}\label{gbppu_8c_ac0ea182ee405627457dc7fba48120e34}} 
\index{gbppu.c@{gbppu.c}!prvCheckBGP@{prvCheckBGP}}
\index{prvCheckBGP@{prvCheckBGP}!gbppu.c@{gbppu.c}}
\doxysubsubsection{\texorpdfstring{prvCheckBGP()}{prvCheckBGP()}}
{\footnotesize\ttfamily void prv\+Check\+BGP (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Background and window color to palette conversion. 

Updates a color to its appropriate palette based on value of the Background Palette Register. each number assigned corresponds to a color referenced in STM32\textquotesingle{}s L8 color mode. \begin{DoxyReturn}{Returns}
Nothing 
\end{DoxyReturn}
\mbox{\Hypertarget{gbppu_8c_a5b404d5d82422f8042bfd6540ad381ec}\label{gbppu_8c_a5b404d5d82422f8042bfd6540ad381ec}} 
\index{gbppu.c@{gbppu.c}!prvCheckLYC@{prvCheckLYC}}
\index{prvCheckLYC@{prvCheckLYC}!gbppu.c@{gbppu.c}}
\doxysubsubsection{\texorpdfstring{prvCheckLYC()}{prvCheckLYC()}}
{\footnotesize\ttfamily void prv\+Check\+LYC (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{ly }\end{DoxyParamCaption})}



Compares LY Register to LYC. 

LYC Register compares itself to LY Register and Sets the appropriate flag (2nd bit) in the STAT Register if they hold the same value 
\begin{DoxyParams}{Parameters}
{\em ly} & value of the LY Register \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Nothing 
\end{DoxyReturn}
\mbox{\Hypertarget{gbppu_8c_ab73b8cd93989c2272c12fdf5d9f458a3}\label{gbppu_8c_ab73b8cd93989c2272c12fdf5d9f458a3}} 
\index{gbppu.c@{gbppu.c}!prvCheckOBP0@{prvCheckOBP0}}
\index{prvCheckOBP0@{prvCheckOBP0}!gbppu.c@{gbppu.c}}
\doxysubsubsection{\texorpdfstring{prvCheckOBP0()}{prvCheckOBP0()}}
{\footnotesize\ttfamily void prv\+Check\+OBP0 (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



OBP0 register color to palette conversion. 

Updates a color to its appropriate palette based on value of the OBP0 Register. each number assigned corresponds to a color referenced in STM32\textquotesingle{}s L8 color mode. \begin{DoxyReturn}{Returns}
Nothing 
\end{DoxyReturn}
\mbox{\Hypertarget{gbppu_8c_a1432a3e2020cb8fbd5d421d6929a57f4}\label{gbppu_8c_a1432a3e2020cb8fbd5d421d6929a57f4}} 
\index{gbppu.c@{gbppu.c}!prvCheckOBP1@{prvCheckOBP1}}
\index{prvCheckOBP1@{prvCheckOBP1}!gbppu.c@{gbppu.c}}
\doxysubsubsection{\texorpdfstring{prvCheckOBP1()}{prvCheckOBP1()}}
{\footnotesize\ttfamily void prv\+Check\+OBP1 (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



OBP1 register color to palette conversion. 

Updates a color to its appropriate palette based on value of the OBP1 Register. each number assigned corresponds to a color referenced in STM32\textquotesingle{}s L8 color mode. \begin{DoxyReturn}{Returns}
Nothing 
\end{DoxyReturn}
\mbox{\Hypertarget{gbppu_8c_a432ec91bc2248c882f63368d80540076}\label{gbppu_8c_a432ec91bc2248c882f63368d80540076}} 
\index{gbppu.c@{gbppu.c}!prvGBPPUDrawLine@{prvGBPPUDrawLine}}
\index{prvGBPPUDrawLine@{prvGBPPUDrawLine}!gbppu.c@{gbppu.c}}
\doxysubsubsection{\texorpdfstring{prvGBPPUDrawLine()}{prvGBPPUDrawLine()}}
{\footnotesize\ttfamily void prv\+GBPPUDraw\+Line (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{ly,  }\item[{uint8\+\_\+t}]{SCX,  }\item[{uint8\+\_\+t}]{SCY }\end{DoxyParamCaption})}



Update data in the line buffer for 1 line of the Gameboy. 

Populates the line buffer with data related to a line ly, copies line buffer to appropriate location in frame buffer 
\begin{DoxyParams}{Parameters}
{\em ly} & LY Register Value \\
\hline
{\em SCX} & Scroll X Register Value \\
\hline
{\em SCY} & Scroll Y Register Value \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Nothing 
\end{DoxyReturn}
\mbox{\Hypertarget{gbppu_8c_aeeeb1b7836652ece5d6f29c3c219081e}\label{gbppu_8c_aeeeb1b7836652ece5d6f29c3c219081e}} 
\index{gbppu.c@{gbppu.c}!prvGBPPUDrawLineBackground@{prvGBPPUDrawLineBackground}}
\index{prvGBPPUDrawLineBackground@{prvGBPPUDrawLineBackground}!gbppu.c@{gbppu.c}}
\doxysubsubsection{\texorpdfstring{prvGBPPUDrawLineBackground()}{prvGBPPUDrawLineBackground()}}
{\footnotesize\ttfamily void prv\+GBPPUDraw\+Line\+Background (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{ly,  }\item[{uint8\+\_\+t}]{SCX,  }\item[{uint8\+\_\+t}]{SCY,  }\item[{uint16\+\_\+t}]{Tile\+Data\+Addr,  }\item[{uint16\+\_\+t}]{Display\+Addr }\end{DoxyParamCaption})}



Update line buffer with background information. 

Populates the line buffer with Background information on the line ly 
\begin{DoxyParams}{Parameters}
{\em ly} & LY Register Value \\
\hline
{\em SCX} & X location of the left most position on the background tile map \\
\hline
{\em SCY} & Y location of the top most position on the background tile map \\
\hline
{\em Tile\+Data\+Addr} & Start Address of location in VRAM of Background Tiles \\
\hline
{\em Display\+Addr} & Start Address holding the offset in VRAM for each Tile displayed on Screen \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Nothing 
\end{DoxyReturn}
\mbox{\Hypertarget{gbppu_8c_a45c1df62b10bd52b1243c6d837294ef9}\label{gbppu_8c_a45c1df62b10bd52b1243c6d837294ef9}} 
\index{gbppu.c@{gbppu.c}!prvGBPPUDrawLineObjects@{prvGBPPUDrawLineObjects}}
\index{prvGBPPUDrawLineObjects@{prvGBPPUDrawLineObjects}!gbppu.c@{gbppu.c}}
\doxysubsubsection{\texorpdfstring{prvGBPPUDrawLineObjects()}{prvGBPPUDrawLineObjects()}}
{\footnotesize\ttfamily void prv\+GBPPUDraw\+Line\+Objects (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{ly }\end{DoxyParamCaption})}



Update line buffer with object information. 

Populates the line buffer with object sprites on line ly 
\begin{DoxyParams}{Parameters}
{\em ly} & LY Register Value \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Nothing 
\end{DoxyReturn}
\mbox{\Hypertarget{gbppu_8c_a4c8a469ac0b13d39ce543d9b96121107}\label{gbppu_8c_a4c8a469ac0b13d39ce543d9b96121107}} 
\index{gbppu.c@{gbppu.c}!prvGBPPUDrawLineWindow@{prvGBPPUDrawLineWindow}}
\index{prvGBPPUDrawLineWindow@{prvGBPPUDrawLineWindow}!gbppu.c@{gbppu.c}}
\doxysubsubsection{\texorpdfstring{prvGBPPUDrawLineWindow()}{prvGBPPUDrawLineWindow()}}
{\footnotesize\ttfamily void prv\+GBPPUDraw\+Line\+Window (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{ly,  }\item[{uint8\+\_\+t}]{WX,  }\item[{uint8\+\_\+t}]{WY,  }\item[{uint16\+\_\+t}]{Tile\+Data\+Addr,  }\item[{uint16\+\_\+t}]{Display\+Addr }\end{DoxyParamCaption})}



Update line buffer with window information. 

Populates the line buffer with window information if it is currently displayed on the line ly 
\begin{DoxyParams}{Parameters}
{\em ly} & LY Register Value \\
\hline
{\em WX} & Window X position \\
\hline
{\em WY} & Window Y position \\
\hline
{\em Tile\+Data\+Addr} & Start Address of location in VRAM of Window Tiles \\
\hline
{\em Display\+Addr} & Start Address holding the offset in VRAM for each Tile displayed on Screen \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Nothing 
\end{DoxyReturn}
\mbox{\Hypertarget{gbppu_8c_a833e1bbd97a1d31f085e17cc6168f72e}\label{gbppu_8c_a833e1bbd97a1d31f085e17cc6168f72e}} 
\index{gbppu.c@{gbppu.c}!prvGetBackTileDisplaySel@{prvGetBackTileDisplaySel}}
\index{prvGetBackTileDisplaySel@{prvGetBackTileDisplaySel}!gbppu.c@{gbppu.c}}
\doxysubsubsection{\texorpdfstring{prvGetBackTileDisplaySel()}{prvGetBackTileDisplaySel()}}
{\footnotesize\ttfamily uint16\+\_\+t prv\+Get\+Back\+Tile\+Display\+Sel (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Read LCDC Register to find appropriate Background Tile Display Select Address. 

This function Reads from the LCDC Register and depending on the value of the 3rd bit, it will change the Background Tile Display Address to 0X9\+C00 on high or to 0x9800 on low. \begin{DoxyReturn}{Returns}
Background Tile Display Select Address 
\end{DoxyReturn}
\mbox{\Hypertarget{gbppu_8c_a4d71f50a18b8187e042f6a0309444279}\label{gbppu_8c_a4d71f50a18b8187e042f6a0309444279}} 
\index{gbppu.c@{gbppu.c}!prvGetBackWinTileDataSel@{prvGetBackWinTileDataSel}}
\index{prvGetBackWinTileDataSel@{prvGetBackWinTileDataSel}!gbppu.c@{gbppu.c}}
\doxysubsubsection{\texorpdfstring{prvGetBackWinTileDataSel()}{prvGetBackWinTileDataSel()}}
{\footnotesize\ttfamily uint16\+\_\+t prv\+Get\+Back\+Win\+Tile\+Data\+Sel (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Read LCDC Register to find appropriate Background \& Tile Data Address. 

This function Reads from the LCDC Register and depending on the value of the 4th bit, it will change the Background \& Window Tile Data Select Address to 0x8000 on high or to 0x8800 on low. \begin{DoxyReturn}{Returns}
Background \& Window Tile Data Select Address 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
Background \& Window Tile Data Select should be 0x9000 on a low 4th bit in a real Gameboy, but it is much simpler to implement this way with emulation, the 0x400 offset is accounted for in \mbox{\hyperlink{gbppu_8c_a9b29df5e22493dc42927f15a2858730b}{get\+Tile\+Line\+Data()}} 
\end{DoxyNote}
\mbox{\Hypertarget{gbppu_8c_a0dc987e3a4895a95823988f9c0f6cf1f}\label{gbppu_8c_a0dc987e3a4895a95823988f9c0f6cf1f}} 
\index{gbppu.c@{gbppu.c}!prvGetWinTileDisplaySel@{prvGetWinTileDisplaySel}}
\index{prvGetWinTileDisplaySel@{prvGetWinTileDisplaySel}!gbppu.c@{gbppu.c}}
\doxysubsubsection{\texorpdfstring{prvGetWinTileDisplaySel()}{prvGetWinTileDisplaySel()}}
{\footnotesize\ttfamily uint16\+\_\+t prv\+Get\+Win\+Tile\+Display\+Sel (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Read LCDC Register to find appropriate Window Tile Display Select Address. 

This function Reads from the LCDC Register and depending on the value of the 4th bit, it will change the Window Tile Display Address to 0X9\+C00 on high or to 0x9800 on low. \begin{DoxyReturn}{Returns}
Window Tile Display Select Address 
\end{DoxyReturn}
\mbox{\Hypertarget{gbppu_8c_ac2086e2d9ea420499b54833b1726a681}\label{gbppu_8c_ac2086e2d9ea420499b54833b1726a681}} 
\index{gbppu.c@{gbppu.c}!prvSetMode@{prvSetMode}}
\index{prvSetMode@{prvSetMode}!gbppu.c@{gbppu.c}}
\doxysubsubsection{\texorpdfstring{prvSetMode()}{prvSetMode()}}
{\footnotesize\ttfamily void prv\+Set\+Mode (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{mode }\end{DoxyParamCaption})}



Sets the mode of the STAT Register. 


\begin{DoxyParams}{Parameters}
{\em mode} & current status of the LCD controller \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Nothing 
\end{DoxyReturn}
\mbox{\Hypertarget{gbppu_8c_a945ea162b77db42c939d42c2a97aa6b6}\label{gbppu_8c_a945ea162b77db42c939d42c2a97aa6b6}} 
\index{gbppu.c@{gbppu.c}!prvUpdateBuffer@{prvUpdateBuffer}}
\index{prvUpdateBuffer@{prvUpdateBuffer}!gbppu.c@{gbppu.c}}
\doxysubsubsection{\texorpdfstring{prvUpdateBuffer()}{prvUpdateBuffer()}}
{\footnotesize\ttfamily void prv\+Update\+Buffer (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{data,  }\item[{int}]{pixel\+Pos }\end{DoxyParamCaption})}



Updates the line buffer with pixel information for 1 specified pixel. 

Updates and applies a pixel perfect image scaling algorithm on 1 pixel of the line buffer when called. 
\begin{DoxyParams}{Parameters}
{\em data} & Color information for the current pixel \\
\hline
{\em pixel\+Pos} & X position for the current pixel \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Nothing 
\end{DoxyReturn}
\mbox{\Hypertarget{gbppu_8c_af55e16b0234ec9b9a7f6703f53fa18b7}\label{gbppu_8c_af55e16b0234ec9b9a7f6703f53fa18b7}} 
\index{gbppu.c@{gbppu.c}!vGBPPUStep@{vGBPPUStep}}
\index{vGBPPUStep@{vGBPPUStep}!gbppu.c@{gbppu.c}}
\doxysubsubsection{\texorpdfstring{vGBPPUStep()}{vGBPPUStep()}}
{\footnotesize\ttfamily void v\+GBPPUStep (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Steps the PPU by t\+States. 

This function steps the PPU by the t\+States variable if the screen enable (7th) bit of LCDC Register is high, the function sets the mode in the STAT Register using the \mbox{\hyperlink{gbppu_8c_ac2086e2d9ea420499b54833b1726a681}{prv\+Set\+Mode()}} function depending on how many t\+States have elapsed. after a full line is has passed the LY register is updated \mbox{\hyperlink{gbppu_8c_a432ec91bc2248c882f63368d80540076}{prv\+GBPPUDraw\+Line()}} is called to place data in the Line buffer. \begin{DoxyReturn}{Returns}
Nothing 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
The function and the Gameboy both mimic CRT Displays in that their are both a horizontal H-\/\+Blank after a Line is \char`\"{}drawn\char`\"{} and there is a vertical V-\/\+Blank after a full frame is drawn 
\end{DoxyNote}
\begin{DoxyAttention}{Attention}
The placement of the functions v\+Check\+Back\+Win\+Tile\+Data\+Sel() and v\+Check\+Back\+Tile\+Display\+Sel() are just educated guesses at the current moment, more research into when and how often these Registers are updated must be conducted. 
\end{DoxyAttention}
\mbox{\Hypertarget{gbppu_8c_a24dba8d7b4ecd97d4dc8cc7b14ff0031}\label{gbppu_8c_a24dba8d7b4ecd97d4dc8cc7b14ff0031}} 
\index{gbppu.c@{gbppu.c}!vSetLineBuffer@{vSetLineBuffer}}
\index{vSetLineBuffer@{vSetLineBuffer}!gbppu.c@{gbppu.c}}
\doxysubsubsection{\texorpdfstring{vSetLineBuffer()}{vSetLineBuffer()}}
{\footnotesize\ttfamily void v\+Set\+Line\+Buffer (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Zeros All Memory in the Line Buffer. 

\begin{DoxyReturn}{Returns}
Nothing 
\end{DoxyReturn}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{gbppu_8c_a485638b8ee0120e72662b05977915ca3}\label{gbppu_8c_a485638b8ee0120e72662b05977915ca3}} 
\index{gbppu.c@{gbppu.c}!ucBGPColorToPalette@{ucBGPColorToPalette}}
\index{ucBGPColorToPalette@{ucBGPColorToPalette}!gbppu.c@{gbppu.c}}
\doxysubsubsection{\texorpdfstring{ucBGPColorToPalette}{ucBGPColorToPalette}}
{\footnotesize\ttfamily uint8\+\_\+t uc\+BGPColor\+To\+Palette\mbox{[}4\mbox{]}}

\mbox{\Hypertarget{gbppu_8c_ac9de52373fb1ba5b7529ba0d15ebc8b8}\label{gbppu_8c_ac9de52373fb1ba5b7529ba0d15ebc8b8}} 
\index{gbppu.c@{gbppu.c}!ucBGWINline@{ucBGWINline}}
\index{ucBGWINline@{ucBGWINline}!gbppu.c@{gbppu.c}}
\doxysubsubsection{\texorpdfstring{ucBGWINline}{ucBGWINline}}
{\footnotesize\ttfamily uint8\+\_\+t uc\+BGWINline\mbox{[}160\mbox{]}}

\mbox{\Hypertarget{gbppu_8c_accbb06b6c811df643b6d56dcd52e99f5}\label{gbppu_8c_accbb06b6c811df643b6d56dcd52e99f5}} 
\index{gbppu.c@{gbppu.c}!ucGBLine@{ucGBLine}}
\index{ucGBLine@{ucGBLine}!gbppu.c@{gbppu.c}}
\doxysubsubsection{\texorpdfstring{ucGBLine}{ucGBLine}}
{\footnotesize\ttfamily uint8\+\_\+t$\ast$ uc\+GBLine = (uint8\+\_\+t$\ast$)\mbox{\hyperlink{gbppu_8c_a7be588c83ce41143d6df9542c5c4a9c2}{SDRAM1}}}

\mbox{\Hypertarget{gbppu_8c_ae1deb0fdbd829f97dc542cf5cc07cf86}\label{gbppu_8c_ae1deb0fdbd829f97dc542cf5cc07cf86}} 
\index{gbppu.c@{gbppu.c}!ucLY@{ucLY}}
\index{ucLY@{ucLY}!gbppu.c@{gbppu.c}}
\doxysubsubsection{\texorpdfstring{ucLY}{ucLY}}
{\footnotesize\ttfamily uint8\+\_\+t uc\+LY = 0}

\mbox{\Hypertarget{gbppu_8c_a016ccd2d7b6615abe4967f9a27060746}\label{gbppu_8c_a016ccd2d7b6615abe4967f9a27060746}} 
\index{gbppu.c@{gbppu.c}!ucMode@{ucMode}}
\index{ucMode@{ucMode}!gbppu.c@{gbppu.c}}
\doxysubsubsection{\texorpdfstring{ucMode}{ucMode}}
{\footnotesize\ttfamily uint8\+\_\+t uc\+Mode}

\mbox{\Hypertarget{gbppu_8c_a9be772970ed9fbe14e0218fd424b6596}\label{gbppu_8c_a9be772970ed9fbe14e0218fd424b6596}} 
\index{gbppu.c@{gbppu.c}!ucOBP0ColorToPalette@{ucOBP0ColorToPalette}}
\index{ucOBP0ColorToPalette@{ucOBP0ColorToPalette}!gbppu.c@{gbppu.c}}
\doxysubsubsection{\texorpdfstring{ucOBP0ColorToPalette}{ucOBP0ColorToPalette}}
{\footnotesize\ttfamily uint8\+\_\+t uc\+OBP0\+Color\+To\+Palette\mbox{[}4\mbox{]}}

\mbox{\Hypertarget{gbppu_8c_ae10b4a8ffd018a241f9ec6ce9f1f690d}\label{gbppu_8c_ae10b4a8ffd018a241f9ec6ce9f1f690d}} 
\index{gbppu.c@{gbppu.c}!ucOBP1ColorToPalette@{ucOBP1ColorToPalette}}
\index{ucOBP1ColorToPalette@{ucOBP1ColorToPalette}!gbppu.c@{gbppu.c}}
\doxysubsubsection{\texorpdfstring{ucOBP1ColorToPalette}{ucOBP1ColorToPalette}}
{\footnotesize\ttfamily uint8\+\_\+t uc\+OBP1\+Color\+To\+Palette\mbox{[}4\mbox{]}}

\mbox{\Hypertarget{gbppu_8c_ab196f3e59335a72ee34e8481033baf15}\label{gbppu_8c_ab196f3e59335a72ee34e8481033baf15}} 
\index{gbppu.c@{gbppu.c}!ulCurLine@{ulCurLine}}
\index{ulCurLine@{ulCurLine}!gbppu.c@{gbppu.c}}
\doxysubsubsection{\texorpdfstring{ulCurLine}{ulCurLine}}
{\footnotesize\ttfamily uint32\+\_\+t ul\+Cur\+Line}

\mbox{\Hypertarget{gbppu_8c_af58b00da0c806a9f69bda59355d02e29}\label{gbppu_8c_af58b00da0c806a9f69bda59355d02e29}} 
\index{gbppu.c@{gbppu.c}!ulLineAdd@{ulLineAdd}}
\index{ulLineAdd@{ulLineAdd}!gbppu.c@{gbppu.c}}
\doxysubsubsection{\texorpdfstring{ulLineAdd}{ulLineAdd}}
{\footnotesize\ttfamily uint32\+\_\+t ul\+Line\+Add}

\mbox{\Hypertarget{gbppu_8c_ab2318977e8442dfe26bc0a0b41c1f165}\label{gbppu_8c_ab2318977e8442dfe26bc0a0b41c1f165}} 
\index{gbppu.c@{gbppu.c}!ulScaleAmount@{ulScaleAmount}}
\index{ulScaleAmount@{ulScaleAmount}!gbppu.c@{gbppu.c}}
\doxysubsubsection{\texorpdfstring{ulScaleAmount}{ulScaleAmount}}
{\footnotesize\ttfamily uint8\+\_\+t ul\+Scale\+Amount = 3}

\mbox{\Hypertarget{gbppu_8c_a1937f8f3d3d58a98306b4e7491aaebcc}\label{gbppu_8c_a1937f8f3d3d58a98306b4e7491aaebcc}} 
\index{gbppu.c@{gbppu.c}!ultStatesTotal@{ultStatesTotal}}
\index{ultStatesTotal@{ultStatesTotal}!gbppu.c@{gbppu.c}}
\doxysubsubsection{\texorpdfstring{ultStatesTotal}{ultStatesTotal}}
{\footnotesize\ttfamily uint32\+\_\+t ult\+States\+Total}

